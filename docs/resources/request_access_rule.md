---
layout: ""
page_title: "satori_request_access_rule (Resource)"
description: |-
satori_request_access_rule resource allows defining dataset access request rules.
---

# satori_request_access_rule (Resource)

The **satori_request_access_rule** resource allows defining dataset access request rules.

## Example Usage

```terraform
resource "satori_request_access_rule" "request_access1_dataset1" {
  //reference to owning dataset
  parent_data_policy = satori_dataset.dataset1.data_policy_id
  //granted access level, OWNER, READ_WRITE, READ_ONLY
  access_level = "OWNER"
  //identity can not be changed after creation
  identity {
    type = "USER"
    name = "test-user"
  }
  expire_in {
    unit_type = "MONTHS" //MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS
    units = 3
  }
  revoke_if_not_used_in_days = 90
  require_approver_note = true //default is false

  // Optional to add approvers on an access-rule.
  approvers {
    type = "GROUP"
    id   = "781246b7-461d-493a-a2d6-86f2e5w01ff2"
  }

  approvers {
    type = "USER"
    id   = "78dc2cb7-461d-493a-a2d6-86e71fv4v5d2"
  }

  approvers {
    // The MANAGER approver type should not have `id` field set for it.
    type = "MANAGER"
  }
}

resource "satori_request_access_rule" "request_access2_dataset1" {
  parent_data_policy = satori_dataset.dataset1.data_policy_id
  access_level = "READ_ONLY"
  identity {
    type = "GROUP"
    group_id = satori_directory_group.group1.id
  }
  expire_in {
    unit_type = "DAYS" //MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS
    units = 5
  }
  revoke_if_not_used_in_days = 90
  //dataset default security policies
  security_policies = [ ]
  require_approver_note = false // Optional, as default is false
}

resource "satori_request_access_rule" "request_access3_dataset1" {
  parent_data_policy = satori_dataset.dataset1.data_policy_id
  access_level = "READ_WRITE"
  identity {
    type = "IDP_GROUP"
    name = "groupName"
  }
  //no security policies
  security_policies = [ "none" ]
  // suspend this rule
  enabled = false
}

resource "satori_request_access_rule" "request_access1_dataset_definition1" {
  parent_data_policy = satori_dataset.dataset_definition1.data_policy_id
  access_level = "READ_ONLY"
  identity {
    type = "EVERYONE"
  }
  //specific security policies
  security_policies = [ "8c4745f5-a21e-4b7a-bb21-83c54351539f" ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **access_level** (String) Access level to grant, valid values are: READ_ONLY, READ_WRITE, OWNER.
- **identity** (Block List, Min: 1, Max: 1) Identity to apply the rule for. (see [below for nested schema](#nestedblock--identity))
- **parent_data_policy** (String) Parent data policy ID, the data_policy_id field of a dataset.

### Optional

- **approvers** (Block List) Identities of Satori users/IdP groups that will be set as access rule approvers. Once an access rule approver is defined, it is the ONLY entity that can approve the request generated from this access rule (see [below for nested schema](#nestedblock--approvers))
- **enabled** (Boolean) Enable the rule. Defaults to `true`.
- **expire_in** (Block List, Max: 1) Rule expiration settings. (see [below for nested schema](#nestedblock--expire_in))
- **id** (String) The ID of this resource.
- **require_approver_note** (Boolean) Require from the approver an `approver note` when approving the request created from the defined rule. Defaults to `false`.
- **revoke_if_not_used_in_days** (Number) Revoke access if rule not used in the last given days. Zero = do not revoke. Max value is 180. Defaults to `0`.
- **security_policies** (List of String) IDs of security policies to apply to this rule. Empty list for default dataset security policies. [ "none" ] list for no policies.

<a id="nestedblock--identity"></a>
### Nested Schema for `identity`

Required:

- **type** (String) Identity type, valid types are: USER, IDP_GROUP, GROUP, EVERYONE.
Can not be changed after creation.

Optional:

- **group_id** (String) Directory group ID for identity of type GROUP.
Can not be changed after creation.
- **name** (String) User/group name for identity types of USER and IDP_GROUP.
Can not be changed after creation.


<a id="nestedblock--approvers"></a>
### Nested Schema for `approvers`

Required:

- **type** (String) Approver type, can be either `GROUP` (IdP Group alone) or `USER`

Optional:

- **id** (String) The ID of the approver entity, when type is `MANAGER` this field must not be set.


<a id="nestedblock--expire_in"></a>
### Nested Schema for `expire_in`

Required:

- **unit_type** (String) Unit type for units field, possible values are: MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS.
- **units** (Number) Number of units of unit_type.